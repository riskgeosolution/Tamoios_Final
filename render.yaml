# render.yaml
# v8 - Corrigindo a estrutura de nível superior (root-level)

# 1. Definição do "Cofre" de Senhas
# (O Render vai ler este nome e conectá-lo ao grupo que você criou no painel)
envVarGroups:
  - name: tamoios-chaves

# 2. Definição do "HD Virtual"
# (Define o disco que será criado)
disks:
  - name: tamoios-dados
    mountPath: /var/data
    sizeGB: 1

# 3. Definição dos Programas
# (Define os serviços e ANEXA os recursos acima)
services:
  # --- Serviço 1: O Cérebro (worker.py) ---
  - type: worker
    name: tamoios-worker
    region: ohio
    env: python
    plan: starter
    buildCommand: "pip install -r requirements.txt"
    startCommand: "python worker.py"
    envVars: # <-- Esta é a seção para ANEXAR variáveis
      - fromGroup: tamoios-chaves # <-- Sintaxe correta
    disk: # <-- Esta é a seção para ANEXAR o disco
      name: tamoios-dados
      mountPath: /var/data

  # --- Serviço 2: O Site (index.py) ---
  - type: web
    name: tamoios-site
    region: ohio
    env: python
    plan: starter
    buildCommand: "pip install -r requirements.txt"
    startCommand: "gunicorn app:server"
    envVars:
      - fromGroup: tamoios-chaves
    disk:
      name: tamoios-dados
      mountPath: /var/data
# render.yaml
# Versão Corrigida v5 - Sintaxe correta para disco compartilhado

services:
  # --- Serviço 1: O Cérebro (worker.py) ---
  # (Este serviço CRIA o disco)
  - type: worker
    name: tamoios-worker
    region: ohio
    env: python
    plan: starter
    buildCommand: "pip install -r requirements.txt"
    startCommand: "python worker.py"
    envVars:
      - fromGroup: tamoios-chaves # Anexa o "cofre" de senhas
    disk:
      name: tamoios-dados
      mountPath: /var/data
      sizeGB: 1

  # --- Serviço 2: O Site (index.py) ---
  # (Este serviço ANEXA o disco existente)
  - type: web
    name: tamoios-site
    region: ohio
    env: python
    plan: starter
    buildCommand: "pip install -r requirements.txt"
    startCommand: "gunicorn app:server"
    envVars:
      - fromGroup: tamoios-chaves # Anexa o mesmo "cofre"
    disk:
      name: tamoios-dados # Anexa o disco 'tamoios-dados'
      mountPath: /var/data